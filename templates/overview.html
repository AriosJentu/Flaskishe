<head>
	<title>Обзор Расписания</title>
	<script type="text/javascript" src="../static/script/jquery.js"></script>
	<link rel="stylesheet" href="../static/css/style.css">
</head>

<body>
	<form name="Overview" action="/overview" method='POST'>
		<button name="Back" type="submit">Вернуться</button>
		<center>
			<h1>Обзор Расписания</h1>
			<p></p>

			<font size=3>
				<table>
					
					<tr>
						<td>
							Собрать таблицу по столбцу:
						</td>
						<td>
							<select name="JoiningTableColumns">
								{% for col in columns %}
									<option value="{{col.title}}"
										{% if col == join_col %}
											SELECTED
										{% endif %}
									>
										{{col.title}}
									</option>
								{% endfor%}							
							</select>
						</td>
						<td>
							<select name="OrderTypeColumns">
								
								<option value="Не Сортировать" {% if join_col.ascending == None %} SELECTED {% endif %}>Не Сортировать</option>
								<option value="По Возрастанию" {% if join_col.ascending == True %} SELECTED {% endif %}>По Возрастанию</option>
								<option value="По Убыванию" {% if join_col.ascending == False %} SELECTED {% endif %}>По Убыванию</option>
								
							</select>
						</td>
					</tr>
					<tr>
						<td>
							Собрать таблицу по строке:
						</td>
						<td>
							<select name="JoiningTableRows">
								{% for col in columns %}
									<option value="{{col.title}}"
										{% if col == join_row %}
											SELECTED
										{% endif %}
									>
										{{col.title}}
									</option>
								{% endfor%}							
							</select>
						</td>
						<td>
							<select name="OrderTypeRows">
								
								<option value="Не Сортировать" {% if join_row.ascending == None %} SELECTED {% endif %}>Не Сортировать</option>
								<option value="По Возрастанию" {% if join_row.ascending == True %} SELECTED {% endif %}>По Возрастанию</option>
								<option value="По Убыванию" {% if join_row.ascending == False %} SELECTED {% endif %}>По Убыванию</option>
								
							</select>
						</td>
					</tr>

				</table>
				<button name="Accept" type="submit">Применить</button>

				<p></p>
				<h3>Сортировка</h3>
				<table id="tab" class="tab">
					{% for width in widthes%}
						<col width="{{ width }}">
					{% endfor %}
					<tr class="elem">

						{% for i in range(titles|length) %}

							<th class="elem">
								<p align="center">
									<button name="Title{{ titles_origin[i] }}" type="submit">{{ titles[i] }}</button>
									{% if titles_origin[i] == orderby.name and orderby.ascending == True %}
										↓
									{% elif titles_origin[i] == orderby.name and orderby.ascending == False %}
										↑
									{% endif %}
								</p>
							</th>

						{% endfor %}
					</tr>
				</table>

				<p></p>
				<table id="tab" class="elem">
					<tr>
						<th>
							<p></p>
						</th>
						{% for col in jcols %}
							<th>
								<center>
									{% if col == None %}
										<i>Неизвестно</i>
									{% else %}
										{{col}}
									{% endif %}
								</center>
							</th>
						{% endfor %}
					</tr>

					{% for row in jrows %}

						<tr>
							<th>
								<center>
									<p>
										{% if row == None %}
											<i>Неизвестно</i>
										{% else %}
											{{row}}
										{% endif %}
									</p>
									<p>
										<button name="Hide{{row}}">
											{% if row in hides %}
												Раскрыть
											{% else %}
												Скрыть
											{% endif %}
										</button>
									</p>
								</center>
							</th>
							{% for frow in range(table[row]|length) %}
								<td>
									{% if row not in hides %}
										{% for elements in table[row][frow] %}
											<center><table id="tab">
												<tr>
													<th>
														<center>
															<p>
																{% if row == None %}
																	<i>Неизвестно</i>
																{% else %}
																	{{row}}
																{% endif %}
															</p>
															<p>
																{% if jcols[frow] == None %}
																	<i>Неизвестно</i>
																{% else %}
																	{{jcols[frow]}}
																{% endif %}
															</p>
														</center>
													</th>
												</tr>
												{% for field in elements %}
													<tr>
														<td>{{field}}</td>
													</tr>
												{% endfor %}
											</table></center>
											<p></p>
										{% endfor %}
									{% endif %}
								</td>
							{% endfor %}
						</tr>

					{% endfor %}

				</table>
			</font>
		</center>
	</form>
</body>